"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"App",{enumerable:true,get:function(){return App}});const _express=_interop_require_default(require("express"));const _cors=_interop_require_default(require("cors"));const _routes=require("./routes");const _fs=_interop_require_default(require("fs"));const _yaml=_interop_require_default(require("yaml"));const _swaggeruiexpress=_interop_require_default(require("swagger-ui-express"));const _expressratelimit=require("express-rate-limit");function _define_property(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _interop_require_default(obj){return obj&&obj.__esModule?obj:{default:obj}}class App{routes(){_routes.routers.forEach(router=>{this.app.use(router.path,router.router)});this.app.use("/",_swaggeruiexpress.default.serve,_swaggeruiexpress.default.setup(this.swaggerDocument))}listen(){this.app.listen(this.PORT,()=>{console.log(`Server is running on Port: ${this.PORT}`)})}constructor(PORT){_define_property(this,"PORT",void 0);_define_property(this,"app",void 0);_define_property(this,"file",void 0);_define_property(this,"swaggerDocument",void 0);_define_property(this,"rateLimiter",void 0);this.PORT=PORT;this.app=(0,_express.default)();this.rateLimiter=(0,_expressratelimit.rateLimit)({windowMs:60*1e3,limit:50,standardHeaders:true,legacyHeaders:false});this.file=_fs.default.readFileSync("swagger.yaml","utf8");this.swaggerDocument=_yaml.default.parse(this.file);this.app.use(_express.default.json());this.app.use((0,_cors.default)());this.app.use(this.rateLimiter);this.routes()}}